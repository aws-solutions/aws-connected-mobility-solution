{
    "aggregated": {
        "size": 20,
        "from": 0,
        "query": {
            "bool": {
                "filter": []
            }
        },
        "sort": [
            {"sendtimestamp": "desc"}
        ],
        "aggregations" : {
            "dtc_codes": {
                "nested" : {
                    "path" : "trouble_codes"
                },
                "aggs": {
                    "trouble_codes": {
                        "terms": {
                            "field": "trouble_codes.code"
                        }
                    }
                }
            },
            "anomaly_codes": {
                "nested" : {
                    "path" : "anomalies"
                },
                "aggs": {
                    "anomalies": {
                        "terms": {
                            "field": "anomalies.anomaly_type"
                        }
                    }
                }
            },
            "vehicle_count" : { "value_count" : { "field" : "vin.keyword" } }
        }
    },
    "filtered": {
        "size": 10000,
        "query": {
            "bool": {
                "filter": []
            }
        },
        "sort": [
            {"sendtimestamp": "desc"}
        ],
        "aggs": {
            "dtc_codes": {
                "nested" : {
                    "path" : "trouble_codes"
                },
                "aggs": {
                    "trouble_codes": {
                        "terms": {
                            "field": "trouble_codes.code"
                        }
                    }
                }
            },
            "anomaly_codes": {
                "nested" : {
                    "path" : "anomalies"
                },
                "aggs": {
                    "anomalies": {
                        "terms": {
                            "field": "anomalies.anomaly_type"
                        }
                    }
                }
            },
            "vehicle_count" : { "value_count" : { "field" : "vin.keyword" } }
        }
    },
    "single": {
        "query": {
            "term": {
                "vin.keyword": ""
            }
        },
        "aggs": {
            "dtc_codes": {
                "nested" : {
                    "path" : "trouble_codes"
                },
                "aggs": {
                    "trouble_codes": {
                        "terms": {
                            "field": "trouble_codes.code"
                        }
                    }
                }
            },
            "anomaly_codes": {
                "nested" : {
                    "path" : "anomalies"
                },
                "aggs": {
                    "anomalies": {
                        "terms": {
                            "field": "anomalies.anomaly_type"
                        }
                    }
                }
            }
        }
    },
    "single_bbox": {
        "size": 1,
        "query": {
            "bool": {
                "filter": []
            }
        }
    },
    "route": {
        "size": 10000,
        "_source": ["geolocation"],
        "query": {
            "bool": {
                "filter": [
                    {
                        "term": {
                            "vin.keyword": ""
                        }
                    },
                    {
                        "term": {
                            "tripid.keyword": ""
                        }
                    },
                    {
                        "range": {
                            "creationtimestamp": {
                                "gte": "",
                                "lte": "",
                                "boost": 2.0
                            }
                        }
                    }
                ]
            }
        },
        "sort": [
          {"creationtimestamp": "asc"}
        ]
    },
    "trip": {
        "size": 50,
        "from": 0,
        "_source": {
            "includes": ["vin", "creationtimestamp", "sendtimestamp", "tripid", "tripsummary.starttime", "tripsummary.distance", "tripsummary.duration", "tripsummary.fuel", "tripsummary.startlocation", "tripsummary.endlocation"]
        },
        "sort": [
            {"sendtimestamp": "desc"}
        ],
        "query": {
            "bool": {
                "filter": []
            }
        }
    },
    "event": {
        "size": 50,
        "from": 0,
        "sort": [
            {"sendtimestamp": "desc"}
        ],
        "query": {
            "bool": {
                "filter": []
            }
        }
    }
}
